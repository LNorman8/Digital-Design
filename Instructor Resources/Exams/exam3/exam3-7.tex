\documentclass{article}
\usepackage{epsfig, latexsym}

\begin{document}

\newcommand{\SOPmin}{${\rm SOP}_{\rm min} \ $}
\newcommand{\POSmin}{${\rm POS}_{\rm min} \ $}
\newcommand{\bs}{\backslash}
\newcommand{\x}{\addtocounter{enumi}{1} \theenumi}


\title{
\Huge{CSE 271}\\
\normalsize{Exam 3}\\
\normalsize{Return this document!!!}\\
\makebox[4in][l]{Name:}
SSN:}
\date{}

\maketitle{}

\begin{enumerate}
\item {\bf (3 pts.)} How many different \SOPmin realizations does F have?
F(A,B,C,D)=$\Sigma$m(3,4,5,7,8,9,11,12)

$$ \begin{array} {c||c|c|c|c}
        AB \bs CD & 00 & 01 & 11 & 10 \\ \hline \hline
        00        &    &    &    &    \\ \hline
        01        &    &    &    &    \\ \hline
        11        &    &    &    &    \\ \hline
        10        &    &    &    &    \\
\end{array} $$ 

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 1 & b) 2 & c) 3 & d) 4 & e) 5 or more \\
\end{tabular}

\item {\bf (3 pts.)} The output of a sequential circuit is fundamentally
different than a combinational circuit because its output is a function
of the?
\begin{description}
\item{a) } State
\item{b) } Input
\item{c) } Output
\item{d) } Number of inputs
\item{e) } The staple monkey
\end{description}

\item {\bf (2 pts.)} You are told to implement a 3 bit counter using our seven
step FSM design process.  Each state represents the current count value.  The
state assignment is performed using a dense encoding. 
How many flip flops will this FSM require?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 3 & b) 4 & c) 7 & d) 8 & e) 16 \\
\end{tabular}

\item {\bf (2 pts.)} You are told to implement a 3 bit counter using the
ones hot design process.  Each state represents the current count value. 
How many flip flops will the counter require?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 3 & b) 4 & c) 7 & d) 8 & e) 16 \\
\end{tabular}

\pagebreak
\item {\bf (2 pts.)} Given the following state table and the state assignment,
determine the entry in the transition kmap marked with a *.
{\small
$$\begin{array}{lll}
$$\begin{array}{c||c|c}
        cs \bs X & 0   &  1  \\ \hline \hline
        A        & B,0 & A,0 \\ \hline
        B        & D,0 & A,0 \\ \hline
        C        & C,1 & B,1 \\ \hline
        D        & A,1 & C,1 \\ 
\end{array}$$
&
$$\begin{array}{c||c|c}
        state & Q_1 & Q_0    \\ \hline \hline
        A     & 1 & 0  \\ \hline
        B     & 0 & 0 \\ \hline
        C     & 1 & 1 \\ \hline
        D     & 0 & 1 \\
\end{array}$$
&
$$\begin{array}{c||c|c}
        Q_1 Q_0 \bs X & 0   &  1   \\ \hline \hline
        00       &     &     \\ \hline
        01       &     &     \\ \hline
        10       & *   &     \\ \hline
        11       &     &     \\
\end{array}$$\\
\end{array}$$}

\begin{description}
\item{a) }00,0
\item{b) }01,1
\item{c) }10,0
\item{d) }11,0
\item{e) }None of the above.
\end{description}

Given the transition kmap to the right, determine the MIEs
and OEs.
{\small
$$\begin{array}{cll}
$$\begin{array}{c||c|c|c|c}
        Q \bs X_1 X_0 & 00  & 01  & 11  & 10  \\ \hline \hline
        0             & 1,1 & 1,1 & 0,1 & 0,1 \\ \hline
        1             & 1,0 & 0,0 & 0,0 & 1,0 \\
\end{array}$$
&
$$\begin{array} {c||c|c|c|c}
        Q \bs X_1 X_0 & 00 & 01 & 11 & 10 \\ \hline \hline
        0             &    &    &    &    \\ \hline
        1             &    &    &    &    \\
\end{array}$$
&
$$\begin{array} {c||c|c|c|c}
        Q \bs X_1 X_0 & 00 & 01 & 11 & 10 \\ \hline \hline
        0             &    &    &    &    \\ \hline
        1             &    &    &    &    \\
\end{array}$$ \\
Q^+,Z & D= & Z= \\
\end{array}$$}
\item {\bf (2 pts.)} What does $D=$ ?
\begin{description}
\item{a) }$X_1'X_0' + Q'X_1' + QX_1X_0'$
\item{b) }$X_1'X_0' + Q'X_1' + QX_0'$
\item{c) }$Q'X_1' + QX_1X_0'$
\item{d) }$Q'X_1' + QX_0'$
\item{e) }$Q'$
\end{description}

\item {\bf (2 pts.)} What does $Z=$ ?
\begin{description}
\item{a) }$X_1'X_0' + Q'X_1' + QX_1X_0'$
\item{b) }$X_1'X_0' + Q'X_1' + QX_0'$
\item{c) }$Q'X_1' + QX_1X_0'$
\item{d) }$Q'X_1' + QX_0'$
\item{e) }$Q'$
\end{description}




\pagebreak
Questions 8-11 concern the FSM realization of the state diagram given below.
Assume a ones hot encoding of the states.  Call the input $X$ and the output
$Z$.  Let $D_A$ be the input to the flip flop representing state $A$.  Let $Q_A$
be the output from the flip flop representing state $A$.  Apply the preceding
definitions to $D_B, Q_B, D_C, Q_C, D_R, Q_R$.

\item {\bf (1 pts.)} How many flip flops are required to realize this FSM?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 1 & b) 2 & c) 3 & d) 4 & e) 5 \\
\end{tabular}

\item {\bf (3 pts.)} What is the memory input equation for flip flop $A$?
\begin{description}
\item{a) } 1
\item{b) } 0
\item{c) } $X'Q_B$
\item{d) } $XQ_A + XQ_C$
\item{e) } None of the above.
\end{description}

\item {\bf (3 pts.)} What is the memory input equation for flip flop $R$?
\begin{description}
\item{a) } 1
\item{b) } 0
\item{c) } $XQ_B + X'Q_C$
\item{d) } $Q_R$
\item{e) } None of the above.
\end{description}
\includegraphics[-60mm,15mm][0mm,15.1mm]{./Fig3/sd.eps}
\item {\bf (3 pts.)} What is the equation for $Z$?
\begin{description}
\item{a) } 0
\item{b) } 1
\item{c) } $Q_R$ + $Q_C$
\item{d) } $XQ_R + XQ_C + XQ_B + XQ_A$
\item{e) } None of the above.
\end{description}

\pagebreak

The figure below shows a FSM constructed from 1 D flip flop
and some combinational logic.  The timing diagram to the
right shows the response of the circuit to an input sequence
$X$ applied to it.  The timing diagram shows small propagation
delays.  From the timing diagram you are to infer the contents
of the combinational logic box.

\includegraphics{./Fig3/fsm_analysis.eps}

\item {\bf (3 pts.)} Which of the following describes $D$?
\begin{description}
\item{a) } $D=Q'$
\item{b) } $D=X'$
\item{c) } $D=XQ'$
\item{d) } $D=XQ'+X'Q$
\item{e) } $D$ Cannot be determined from given information.
\end{description}

\item {\bf (3 pts.)} Which of the following describes $Z$?
\begin{description}
\item{a) } $Z=Q$
\item{b) } $Z=X$
\item{c) } $Z=X'Q$
\item{d) } $Z=X'Q+XQ'$
\item{e) } $Z$ Cannot be determined from given information.
\end{description}

\item {\bf (3 pts.)} What is the state table entry for the cell marked with letter Z?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) $A$,0 & b) $B$,1 & c) $B$,0 & d) $C$,0 & e) $C$,1 \\
\end{tabular}

\includegraphics[-30mm,40mm][0mm,0mm]{./Fig3/sd}

\begin{tabular}{l|l|l}
state & 0 & 1 \\ \hline
A    &   &   \\ \hline
B    &   &   \\ \hline
C    &   & Z \\ \hline
D    &   &   \\ 
\end{tabular}

\pagebreak
For questions 15-20 use the state diagram below.  Assume that the
FSM is built correctly.  The symbols $a,b,A,B,C$ are standing in for
the actual variables that have been placed on the arcs (I am using
these symbols to hide their actual values).  Note, states
$s_1$ and $s_2$ may have other output arcs that are not shown.
This question requires
you to think about the potential variables that could appear on the 
arcs of a legally built FSM.  Mark Always if all legal expressions
on the arcs satisfy the stated condition. Mark Sometimes if some,
but not all, legal expressions satisfy the expression.  Mark
Never if no legal expressions satisfy the stated condition.

\includegraphics{./Fig3/trans.eps}

\item{\bf (1 pts.)} $a = b$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}

\item{\bf (1 pts.)} $A = B = C$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}

\item{\bf (1 pts.)} $a\  or\  b = 1$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}

\item{\bf (1 pts.)} $A\  or\  B\  or\  C = 1$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}

\item{\bf (1 pts.)} $a\  and\  b = 0$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}

\item{\bf (1 pts.)} $A\  and\  B\  and\  C = 0$.

\begin{tabular}{p{1.25in}p{1.25in}p{1.25in}}
a) Always  & b) Sometimes & c) Never  \\
\end{tabular}


\pagebreak
For questions 20-22 use the algorithm and the corresponding piece 
of the control unit below.

\includegraphics[-60mm,50mm][0mm,51mm]{./Fig3/branch.eps}

\begin{verbatim}
if (x==1) then 
    if (y==1) then A=A+1;
    else           B=B+1;
else        
    if (y==1)      C=C+1;
    else           D=D+1;
\end{verbatim}
\vspace{16mm}


\item {\bf (3 pts.)} In which state does D get incremented?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) S4 & b) S5 & c) S6 & d) S7 & e) other \\
\end{tabular}

\item {\bf (3 pts.)}Assume that X=1 and Y=1.  Given the partial timing 
diagram below, about what time will the outputs of the A register 
equal A+1?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 40nS & b) 60nS & c) 80nS & d) 120nS & e) 140nS \\
\end{tabular}

\includegraphics{./Fig3/time.eps}

\item {\bf (3 pts.)} How many states can the control unit be
reduced to, assuming that you keep state S1?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 1 & b) 4 & c) 5 & d) 6 & e) 7 \\
\end{tabular}

%%%%%%%%%%%%%%%%%%%%%%% NEW QUESTIONS %%%%%%%%%%%%%%%%%%%%%%%%%5

\pagebreak
\item {\bf (3 pts.)} The circuit below implements the following delay loop.
\begin{verbatim}
for(i=A; i<=B; i++);
\end{verbatim}
Note the equality on the B variable.   The datapath and control used to 
implement this algorithm is shown below.  In the \verb+init+ state the
FSM loads the counter.  While in the \verb+count+ state the
FSM increments the counter and simultaneously checks the comparators
output.  What value should be placed on the second comparator output
so that the FSM spends exactly the right amount of time in the \verb+count+
state?

\includegraphics[-30mm,25mm][0mm,0mm]{./Fig3/countfsm}

\begin{description}
\item{a) } $B-2$
\item{b) } $B-1$
\item{c) } $B$
\item{d) } $B+1$
\item{e) } $B+2$
\end{description}




The following circuit is used to read and write a RAM.
Consult it for questions 25-27.  Note, this question
requires you to determine the direction of data flow in 
the circuit, hence arrows are not shown on the data line.
In addition you shoud not infer anything from the position
of the data lines incident to the regsiters.

\includegraphics{./Fig3/ramtsb}

\item {\bf (3 pts.)} 
Which register does the RAM read data from on a write?

\begin{tabular}{p{1.75in}p{1.75in}}
a) RegA & b) RegB \\
\end{tabular}


\item {\bf (3 pts.)} 
For which operation does the TSB tristate its output?

\begin{tabular}{p{1.75in}p{1.75in}}
a) RAM Read & b) RAM Write \\
\end{tabular}


\item {\bf (3 pts.)} 
The address lines (not shown in the schematic) will need to 
have a TSB as well.

\begin{tabular}{p{1.75in}p{1.75in}}
a) True & b) False \\
\end{tabular}


\pagebreak

Questions 28-31 concern themselves with the problem of 
implementing a doubly nested for loops.  The algorithm
follows.

\scalebox{0.7}{\includegraphics[-70mm,30mm][0mm,0mm]{./Fig3/doubleloop}}

\begin{verbatim}
for(i=0; i<=A; i++) {
    for(j=0; j<=B; j++) {
        inner_body;
    }
    outer_body;
}
next
\end{verbatim}

Part of the state diagram for the FSM is already draw.  Answer the
questions in order to help me complete it.


\item{\bf(1 pt.)} Which state does the L' arc from \verb+compI+ go to?
\begin{description}
\item{a) } \verb+outer_body+
\item{b) } \verb+incI+
\item{c) } \verb+inner_body+
\item{d) } \verb+next+
\item{e) } None of the above.
\end{description}

\item{\bf(1 pt.)} Which state does the L' arc from \verb+compJ+ go to?
\begin{description}
\item{a) } \verb+outer_body+
\item{b) } \verb+incJ+
\item{c) } \verb+incI+
\item{d) } \verb+next+
\item{e) } None of the above.
\end{description}


\item{\bf(1 pt.)} Which state does the arc from \verb+incI+ go to?
\begin{description}
\item{a) } \verb+compI+
\item{b) } \verb+initJ+
\item{c) } \verb+compJ+
\item{d) } \verb+next+
\item{e) } None of the above.
\end{description}

\item{\bf(1 pt.)} Which state does the arc from \verb+incJ+ go to?
\begin{description}
\item{a) } \verb+compI+
\item{b) } \verb+initJ+
\item{c) } \verb+inner_body+
\item{d) } \verb+next+
\item{e) } None of the above.
\end{description}

\pagebreak
\item{\bf(1 pt.)} Don't cares are not used as control inputs on sequential
circuits because.
\begin{description}
\item{a) } A sequential circuit will remember an wrong control input.
\item{b) } It would agitate the staple monkey.
\item{c) } FSM are built from combination logic and flip flops.
\item{d) } When a sequential circuit loads a value its control input is active.
\item{e) } None of the above.
\end{description}

\item{\bf(1 pt.)} The output of a mux feeds a register.  The FSM tells the
register to hold.  What is true.
\begin{description}
\item{a) } The input of the register cannot change.
\item{b) } The control input of the mux is a don't care.
\item{c) } The output of the register is being feed into the mux.
\item{d) } The output of the register cannot be used during that clock cycle.
\item{e) } None of the above.
\end{description}

\item{\bf(1 pt.)} In a complete 2-line handshake, how many transitions are
their on the 2 control lines?  A line makes a transistion when it changes
its logic level.
\begin{description}
\item{a) } 2
\item{b) } 3
\item{c) } 4
\item{d) } 5
\item{e) } None of the above.
\end{description}

\item {\bf (3 pts.)} 
A FSM has an input called \verb+button+ which is the connected to 
a push button.  When pressed the button outputs a 0, 
otherwise it outputs a 1.  While the button is pressed we want 
the FSM to stay in state \verb+wait+ and increment a counter 
(via the control word).  How should the self arc to state 
\verb+wait+ be labeled?

\begin{description}
\item{a) } \verb+button'+
\item{b) } \verb+button+
\item{c) } There is no self arc to/from \verb+wait+
\item{d) } None of the above
\end{description}

%%%%%%%%%%%%%%%%%%%%%%% NEW QUESTIONS %%%%%%%%%%%%%%%%%%%%%%%%%5

\pagebreak
Questions 36-60 {\bf (1 pt. each)} This question deals with the construction 
of a digital circuit to accomplish the task specified by the following 
algorithm.  A(0) refers to the LSB of A.  A$>>$ 1 refers to A shifted right 
1 bit.

{\small
\begin{verbatim}
while(1) {
    while(REQ == 0);              // If the control bit equals 0 or 00  mark A 
    A = datainA;                  // If the control bit equals 01       mark B 
    B = datainB;                  // If the control bit equals 10       mark C 
    ACK = 1;                      // If the control bit equals 1 or 11  mark D 
    while (REQ == 1);             // If the control bit is a don't care mark E 
    ACK = 0;
    C = 0;
    for (i=0; i<B; i++) {
        if (A(0) == 1) then
            C = C + 1;
        else 
            C = C - 1;
        A = A >> 1;
}   } 
\end{verbatim}}

\scalebox{0.7} {\includegraphics{./Fig3/dp&cu.eps}}

\begin{tabular}{|l||l|l|l|l|l|l|l|}  \hline
State & ACK & A       & B      & C      & Mux        & count   & Add/Sub \\ \hline
      & 0   & 00 hold & 0 hold & 0 hold & 0 pass 0   & 00 hold & 0 add \\ \hline
      & 1   & 01 SR   & 1 load & 1 load & 1 pass C$\pm$1 & 01 down & 1 sub \\ \hline
      &     & 10 SL   &        &        &            & 10 up   &       \\ \hline
      &     & 11 load &        &        &            & 11 load &       \\ \hline   \hline
Wait1 & \x  &         &        &        &            &         &       \\ \hline
Get   & \x  &  \x     &  \x    &  \x    &  \x        &  \x     & \x    \\ \hline
Wait2 & \x  &  \x     &        &        &  \x        &  \x     &       \\ \hline
For/If &    &         &        &        &            &         &       \\ \hline
Inc   &     &  \x     &        &  \x    &  \x        &         & \x    \\ \hline
Dec   & \x  &         &        &  \x    &  \x        &         & \x    \\ \hline
Shift &     &  \x     &  \x    &  \x    &  \x        &         & \x    \\ \hline
\end{tabular}

\pagebreak
Questions 61-64 are based on the datapath and control shown on the previous page.

\item{\bf (2 pts.)} How many bits are in the status word?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 1 & b) 2 & c) 3 & d) 5 & e) 9 \\
\end{tabular}

\item{\bf (2 pts.)} How many bits are in the control word?

\begin{tabular}{p{0.75in}p{0.75in}p{0.75in}p{0.75in}p{0.75in}}
a) 2 & b) 3 & c) 5 & d) 7 & e) 9 \\
\end{tabular}

\item{\bf (3 pts.)} What is the Memory Input Equation for the For/If
flip flop; assume a ones-hot encoding?
\begin{description}
\item{a) } $D_{\rm For/If} = Q_{\rm Wait1}*L' + Q_{\rm Inc}*L*A(0) + Q_{\rm Dec}*L*A(0)'$
\item{b) } $Q_{\rm For/If} = D_{\rm Wait1}*L' + D_{\rm Inc}*L*A(0) + D_{\rm Dec}*L*A(0)'$
\item{c) } $D_{\rm For/If} = Q_{\rm Wait2}*REQ' + Q_{\rm Shift}$
\item{d) } $Q_{\rm For/If} = D_{\rm Wait2}*REQ' + D_{\rm Shift}$
\item{e) } None of the above.
\end{description}

\item{\bf (2 pts.)} Which of the following is the circuit playing in the
two-line handshake?
\begin{description}
\item{a) } Active Producer
\item{b) } Active Consumer
\item{c) } Passive Producer
\item{d) } Passive Consumer
\end{description}


\pagebreak
For problems 65-69 use the following figure and timing diagram.
You should assume that all the devices process 5-bits data
values.

\includegraphics{./Fig3/BBBtiming1}

\item {\bf (2 pt.)}What is the value of $Q$ at time 15?

\begin{tabular}{p{0.6in} p{0.6in} p{0.6in} p{0.6in} l}
a) 2 & b) 3 & c) 5 & d) 6 & e) 9
\end{tabular}

\item {\bf (2 pt.)}What is the value of $A$ at time 25?

\begin{tabular}{p{0.6in} p{0.6in} p{0.6in} p{0.6in} l}
a) 2 & b) 3 & c) 5 & d) 8 & e) 9
\end{tabular}

\item {\bf (2 pt.)}What is the value of $M$ at time 35?

\begin{tabular}{p{0.6in} p{0.6in} p{0.6in} p{0.6in} l}
a) 2 & b) 5 & c) 9 & d) 12 & e) 15
\end{tabular}

\item {\bf (2 pt.)}What is the value of $Q$ at time 45?

\begin{tabular}{p{0.6in} p{0.6in} p{0.6in} p{0.6in} l}
a) 2 & b) 5 & c) 9 & d) 12 & e) 15
\end{tabular}

\item {\bf (2 pt.)}What is the value of $A$ at time 55?

\begin{tabular}{p{0.6in} p{0.6in} p{0.6in} p{0.6in} l}
a) 2 & b) 5 & c) 9 & d) 12 & e) 15
\end{tabular}

\pagebreak
\include{survey}

\end{enumerate}

\end{document}


